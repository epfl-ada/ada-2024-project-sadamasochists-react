"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{2128:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var o=r(5155),n=r(2115),a=r(1197),c=r(4262);let l=e=>({"united states of america":"United States",czechia:"Czech Republic",fiji:"Fiji Islands","democratic republic of the congo":"Dem Rep of Congo","republic of serbia":"Serbia","united republic of tanzania":"Tanzania","the bahamas":"Bahamas","north macedonia":"Macedonia"})[e.toLowerCase()]||e,u=e=>{let{isSpinning:t=!0,onCountryClick:r,selectedCountry:u,onCountryHover:s,similarCountries:i=[]}=e,p=(0,n.useRef)(null),g=(0,n.useRef)(null),m=(0,n.useRef)(null),d=(0,n.useRef)(new Map),f={x:0,y:0};return window.addEventListener("mousemove",e=>{f.x=e.clientX,f.y=e.clientY}),(0,n.useEffect)(()=>{if(!p.current)return;let e=(0,a.A)().globeImageUrl("//unpkg.com/three-globe/example/img/earth-blue-marble.jpg").backgroundImageUrl("//unpkg.com/three-globe/example/img/night-sky.png").showAtmosphere(!0).atmosphereColor("#1a237e").atmosphereAltitude(.1).polygonAltitude(.01).polygonCapColor(e=>e.__color||"#6d6d6d").polygonSideColor(()=>"#232323").polygonStrokeColor(()=>"#111").onPolygonClick(async(e,t,o)=>{let{lat:n,lng:a}=o;if(!e||!r)return;let c=l(e.properties.ADMIN||e.properties.name);if(d.current.get(c)){let t={name:c,code:e.properties.ISO_A2||e.properties.ISO_A3||"Unknown",coordinates:[n,a]};if(g.current){let e=g.current.polygonsData();e.forEach(e=>{let t=l(e.properties.ADMIN||e.properties.name),r=d.current.get(t);e.__color=r?"rgba(200, 200, 200, 0.3)":"rgba(100, 100, 100, 0.15)"}),g.current.polygonsData([...e])}r(t)}}).onPolygonHover(e=>{if(!e){document.body.style.cursor="default","function"==typeof s&&s(null,0,0);return}console.log("Hovering over",e.properties.ADMIN||e.properties.name),document.body.style.cursor="pointer";let t=l(e.properties.ADMIN||e.properties.name),r=d.current.get(t);"function"==typeof s&&s(r?"<strong>".concat(t,"</strong>"):"<strong>".concat(t,"</strong> - No data available for this country \uD83D\uDE22"),f.x,f.y)});return fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_110m_admin_0_countries.geojson").then(e=>e.json()).then(async r=>{let{features:o}=r,n=await Promise.all(o.map(async e=>{let t=l(e.properties.ADMIN||e.properties.name);try{let r=(await fetch("/out/".concat((0,c.A)(t),"/output.json"),{method:"HEAD"})).ok;d.current.set(t,r),e.__color=r?"rgba(200, 200, 200, 0.3)":"rgba(100, 100, 100, 0.15)"}catch(r){d.current.set(t,!1),e.__color="rgba(100, 100, 100, 0.15)"}return e}));e.polygonsData(n),g.current=e(p.current);let a=e.controls();a.enableDamping=!0,a.dampingFactor=.1,a.enablePan=!1,a.minDistance=200,a.maxDistance=800,a.rotateSpeed=.3,a.zoomSpeed=.5,a.autoRotate=t,a.autoRotateSpeed=.5,a.addEventListener("start",()=>{m.current&&clearTimeout(m.current),a.autoRotate=!1}),a.addEventListener("end",()=>{m.current&&clearTimeout(m.current),t&&!u&&(m.current=setTimeout(()=>{a.autoRotate=!0},3e3))})}),()=>{g.current&&g.current._destructor(),m.current&&clearTimeout(m.current)}},[]),(0,n.useEffect)(()=>{if(!g.current)return;let e=g.current.polygonsData();if(!e)return;e.forEach(e=>{let t=l(e.properties.ADMIN||e.properties.name),r=d.current.get(t);u===t?e.__color="#ff0000":i.includes(t)?e.__color="#00ff00":e.__color=r?"rgba(200, 200, 200, 0.3)":"rgba(100, 100, 100, 0.15)"}),g.current.polygonsData([...e]);let r=g.current.controls();r&&(r.autoRotate=t&&!u)},[t,u,i]),(0,o.jsx)("div",{ref:p,className:"w-full h-full bg-black"})}}}]);